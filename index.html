<!DOCTYPE html>

<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <title>Rune</title>
  <link rel="manifest" href="./manifest.json">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
    integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
    crossorigin=""/>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

  <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
  <!-- <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
    integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
    crossorigin=""></script> -->
  <script type="text/javascript" src="L.TileLayer.Zoomify.js"></script>

    </script>

  <script>
  $( initmap );

  var map;

  function initmap() {
    // See also: http://kempe.net/blog/2014/06/14/leaflet-pan-zoom-image.html

    // var minZoom = 2;
    // var maxZoom = 8;
    //
    // map = L.map('map', {
    //   minZoom: minZoom,
    //   maxZoom: maxZoom,
    //   center: [0, 0],
    //   zoom: minZoom,
    //   crs: L.CRS.Simple
    // });
    //
    // // dimensions of the image
    // var w = 3300, //orginal: 3300
    //     h = 2450, // orginal: 2450
    //     url = 'kort.png';
    //
    // // calculate the edges of the image, in coordinate space
    // var southWest = map.unproject([0, h], map.getMaxZoom()-(maxZoom/2));
    // var northEast = map.unproject([w, 0], map.getMaxZoom()-(maxZoom/2));
    // var bounds = new L.LatLngBounds(southWest, northEast);
    //
    // // add the image overlay,
    // // so that it covers the entire map
    // L.imageOverlay(url, bounds).addTo(map);
    //
    // // tell leaflet that the map is exactly as big as the image
    // map.setMaxBounds(bounds);

    map = L.map('map', {
      minZoom: 1,
      maxZoom: 7,
      center: [0, 0],
      zoom: 1,
      crs: L.CRS.Simple
    });
     var w = 30000, //orginal: 3300
         h = 21212, // orginal: 2450
         url = 'kort/kort18/';
     // calculate the edges of the image, in coordinate space
     var offest = 5000;
     var southWest = map.unproject([(-1*offest), (h+offest)], map.getMaxZoom());
     var northEast = map.unproject([(w+offest), (-1*offest)], map.getMaxZoom());
     var bounds = new L.LatLngBounds(southWest, northEast);

    L.tileLayer.zoomify(url, {
        width: w,
        height: h,
        tolerance: 1,
    }).addTo(map);

    map.setMaxBounds(bounds);


     map.on('click', function(e) {
       var lat = e.latlng.lat
       console.log("Lat, Lon : " + lat + ", " + e.latlng.lng)

// [0,0] - [165,231]
// brede 0-231
// h√∏jde 0-165

     });
  }


  </script>
  <style >
  html,body{
    padding: 0;
    margin: 0;
  }
    #map {
      width: 100vw;
      height: 90vh;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }
  </style>
</head>

<bod>
  <h4>RUNE TRIES LEAFLET</h4>
<div id="map"></div>

</body>
</html>
